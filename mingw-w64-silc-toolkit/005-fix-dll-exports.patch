--- x/lib/Makefile.am.orig	2014-05-13 08:20:16.000000000 +0200
+++ x/lib/Makefile.am	2014-12-24 03:27:26.027053400 +0100
@@ -82,14 +82,14 @@
 LIBSILC_AGE=@LIBSILC_AGE@

 libsilc.a:
-	find $(SILCLIB_DIRS) -type f -name *.lo | xargs	$(LIBTOOL) --mode=link $(CC) $(CFLAGS) $(LDFLAGS) $(SILC_LINK_LIBS)	$(LIBTOOL_SILC_VERSION)	$(LIBTOOL_OPTS) -o libsilc.la
+	find $(SILCLIB_DIRS) -type f -name *.lo | xargs	$(LIBTOOL) --mode=link $(CC) $(CFLAGS) $(LDFLAGS) ../win32/libsilc/libsilc.def $(SILC_LINK_LIBS)	$(LIBTOOL_SILC_VERSION)	$(LIBTOOL_OPTS) -o libsilc.la

 LIBSILCCLIENT_CURRENT=@LIBSILCCLIENT_CURRENT@
 LIBSILCCLIENT_REVISION=@LIBSILCCLIENT_REVISION@
 LIBSILCCLIENT_AGE=@LIBSILCCLIENT_AGE@

 libsilcclient.a: libsilc.a
-	find $(SILCCLIENTLIB_DIRS) -type f -name *.lo | xargs	$(LIBTOOL) --mode=link $(CC) $(CFLAGS) $(LDFLAGS)	$(SILCCLIENT_LINK_LIBS) $(LIBTOOL_SILCCLIENT_VERSION)	$(LIBTOOL_OPTS) -o libsilcclient.la
+	find $(SILCCLIENTLIB_DIRS) -type f -name *.lo | xargs	$(LIBTOOL) --mode=link $(CC) $(CFLAGS) $(LDFLAGS) ../win32/libsilcclient/libsilcclient.def $(SILCCLIENT_LINK_LIBS) $(LIBTOOL_SILCCLIENT_VERSION)	$(LIBTOOL_OPTS) -o libsilcclient.la


 pkgconfigdir = $(libdir)/pkgconfig
--- x/win32/libsilc/libsilc.def.orig	2014-05-05 07:30:11.000000000 +0200
+++ x/win32/libsilc/libsilc.def	2014-12-24 03:21:05.628929600 +0100
@@ -106,7 +106,7 @@
 	silc_packet_stream_create @ 105 ;
 	silc_packet_stream_destroy @ 106 ;
 	silc_packet_stream_get_stream @ 107 ;
-	silc_packet_stream_inject_packet @ 108 ;
+	silc_packet_stream_inject @ 108 ;
 	silc_packet_stream_is_udp @ 109 ;
 	silc_packet_stream_is_valid @ 110 ;
 	silc_packet_stream_link @ 111 ;
--- x/lib/silcske/silcske.c.orig	2014-12-24 04:06:52.876999300 +0100
+++ x/lib/silcske/silcske.c	2014-12-24 04:06:35.083627900 +0100
@@ -18,6 +18,9 @@
 */
 /* $Id$ */

+/* let's disable dllimport in silccrypt, see includes/silcwin32.h */
+#define DLL
+
 #include "silc.h"
 #include "silcske.h"
 #include "groups_internal.h"
